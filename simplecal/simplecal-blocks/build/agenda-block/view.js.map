{"version":3,"file":"agenda-block/view.js","mappings":";;;;;;;;;AAAA,+E;;;;;;SCAA;SACA;;SAEA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;;SAEA;SACA;;SAEA;SACA;SACA;;;;;UCtBA;UACA;UACA;UACA,uDAAuD,iBAAiB;UACxE;UACA,gDAAgD,aAAa;UAC7D,E;;;;;;;;;;;;ACNyE;AACzE,MAAMG,QAAQ,GAAGC,MAAM,CAACC,EAAE,CAACF,QAAQ;AAEnC,MAAM;EAAEG;AAAM,CAAC,GAAGJ,+DAAK,CAAE,aAAa,EAAE;EACvCI,KAAK,EAAE;IACNC,MAAM,EAAE,EAAE;IACVC,WAAW,EAAE,CAAC;IACdC,cAAc,EAAE,IAAI;IACpBC,gBAAgB,EAAE;EACnB,CAAC;EACDC,OAAO,EAAE;IACRC,SAAS,EAAEA,CAAA,KAAM;MAChB,MAAM;QAAEC;MAAI,CAAC,GAAGZ,oEAAU,CAAC,CAAC;MAC5B,MAAMa,OAAO,GAAGd,oEAAU,CAAC,CAAC;MAE5B,QAAQa,GAAG,CAACE,OAAO,CAACC,SAAS;QAC5B,KAAK,QAAQ;UACZ,IAAI,CAACV,KAAK,CAACI,gBAAgB,EAAE;YAAC;UAAM;UACpC,EAAEJ,KAAK,CAACE,WAAW;UACnB;QACD,KAAK,UAAU;UACd,IAAI,CAACF,KAAK,CAACG,cAAc,EAAE;YAAC;UAAM;UAClC,EAAEH,KAAK,CAACE,WAAW;UACnB;QACD;UACC;MACF;MAEA,MAAMS,SAAS,GAAG,CACjB,QAAQX,KAAK,CAACE,WAAW,CAACU,QAAQ,CAAC,CAAC,EAAE,EACtC,YAAYJ,OAAO,CAACK,YAAY,EAAE,EAClC,gBAAgBL,OAAO,CAACM,YAAY,EAAE,EACtC,wBAAwBN,OAAO,CAACO,oBAAoB,EAAE,EACtD,iBAAiBP,OAAO,CAACQ,aAAa,EAAE,EACxC,iBAAiBR,OAAO,CAACS,aAAa,EAAE,EACxC,eAAeT,OAAO,CAACU,WAAW,EAAE,EACpC,gBAAgBV,OAAO,CAACW,YAAY,EAAE,EACtC,kBAAkBX,OAAO,CAACY,cAAc,EAAE,EAC1C,kBAAkBZ,OAAO,CAACa,cAAc,EAAE,EAC1C,oBAAoBb,OAAO,CAACc,gBAAgB,EAAE,EAC9C,aAAad,OAAO,CAACe,SAAS,EAAE,EAChC,YAAYf,OAAO,CAACgB,QAAQ,EAAE,CAC9B;MAED3B,QAAQ,CAAC;QACR;QACA4B,IAAI,EAAE,gCAAgCd,SAAS,CAACe,IAAI,CAAC,GAAG,CAAC;MAC1D,CAAC,CAAC,CAACC,IAAI,CACLC,QAAQ,IAAK;QACb5B,KAAK,CAACC,MAAM,GAAG2B,QAAQ,CAAC3B,MAAM;QAC9BD,KAAK,CAACG,cAAc,GAAGyB,QAAQ,CAACC,YAAY;QAC5C7B,KAAK,CAACI,gBAAgB,GAAGwB,QAAQ,CAACE,UAAU;MAC7C,CACD,CAAC;IAEF;EACD,CAAC;EACDC,SAAS,EAAE;IACVC,YAAY,EAAEA,CAAA,KAAM;MACnB,MAAM;QAAEzB;MAAI,CAAC,GAAGZ,oEAAU,CAAC,CAAC;MAC5BY,GAAG,CAAC0B,SAAS,GAAGjC,KAAK,CAACC,MAAM;IAC7B;EACD;AACD,CAAC,CAAC,C","sources":["webpack://simplecal-blocks/external module \"@wordpress/interactivity\"","webpack://simplecal-blocks/webpack/bootstrap","webpack://simplecal-blocks/webpack/runtime/make namespace object","webpack://simplecal-blocks/./src/agenda-block/view.js"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { getContext, getElement, store } from '@wordpress/interactivity';\r\nconst apiFetch = window.wp.apiFetch;\r\n\r\nconst { state } = store( 'agendaBlock', {\r\n\tstate: {\r\n\t\toutput: '',\r\n\t\tcurrentPage: 0,\r\n\t\tmorePastEvents: true,\r\n\t\tmoreFutureEvents: true\r\n\t},\r\n\tactions: {\r\n\t\tgetEvents: () => {\r\n\t\t\tconst { ref } = getElement();\r\n\t\t\tconst context = getContext();\r\n\r\n\t\t\tswitch (ref.dataset.direction) {\r\n\t\t\t\tcase \"future\":\r\n\t\t\t\t\tif (!state.moreFutureEvents) {return}\r\n\t\t\t\t\t++state.currentPage;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"previous\":\r\n\t\t\t\t\tif (!state.morePastEvents) {return}\r\n\t\t\t\t\t--state.currentPage;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tconst queryArgs = [\r\n\t\t\t\t`page=${state.currentPage.toString()}`,\r\n\t\t\t\t`per_page=${context.postsPerPage}`,\r\n\t\t\t\t`agendaLayout=${context.agendaLayout}`,\r\n\t\t\t\t`monthYearHeadersShow=${context.monthYearHeadersShow}`,\r\n\t\t\t\t`dayOfWeekShow=${context.dayOfWeekShow}`,\r\n\t\t\t\t`thumbnailShow=${context.thumbnailShow}`,\r\n\t\t\t\t`excerptShow=${context.excerptShow}`,\r\n\t\t\t\t`excerptLines=${context.excerptLines}`,\r\n\t\t\t\t`pastEventsShow=${context.pastEventsShow}`,\r\n\t\t\t\t`pastEventsDays=${context.pastEventsDays}`,\r\n\t\t\t\t`futureEventsDays=${context.futureEventsDays}`,\r\n\t\t\t\t`eventTags=${context.eventTags}`,\r\n\t\t\t\t`tagsShow=${context.tagsShow}`\r\n\t\t\t];\r\n\r\n\t\t\tapiFetch({\r\n\t\t\t\t// TODO: It sure would be nice to use addQueryArgs to build the path, but WordPress doesn't support adding scripts to script modules yet; that's also why apiFetch is being called in a janky way\r\n\t\t\t\tpath: `/simplecal/v1/events/agenda/?${queryArgs.join('&')}`\r\n\t\t\t}).then(\r\n\t\t\t\t(response) => {\r\n\t\t\t\t\tstate.output = response.output;\r\n\t\t\t\t\tstate.morePastEvents = response.morePrevious;\r\n\t\t\t\t\tstate.moreFutureEvents = response.moreFuture;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\t\r\n\t\t}\r\n\t},\r\n\tcallbacks: {\r\n\t\tupdateAgenda: () => {\r\n\t\t\tconst { ref } = getElement();\r\n\t\t\tref.innerHTML = state.output;\r\n\t\t}\r\n\t}\r\n});"],"names":["getContext","getElement","store","apiFetch","window","wp","state","output","currentPage","morePastEvents","moreFutureEvents","actions","getEvents","ref","context","dataset","direction","queryArgs","toString","postsPerPage","agendaLayout","monthYearHeadersShow","dayOfWeekShow","thumbnailShow","excerptShow","excerptLines","pastEventsShow","pastEventsDays","futureEventsDays","eventTags","tagsShow","path","join","then","response","morePrevious","moreFuture","callbacks","updateAgenda","innerHTML"],"sourceRoot":""}